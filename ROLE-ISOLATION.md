# Job Mongolia Platform - 역할별 접근 제한 및 격리 문서

## 📋 개요
이 문서는 Job Mongolia 플랫폼에서 구직자(Candidate), 구인자(Employer/Company), 관리자(Admin) 간의 접근 제한 및 격리된 기능을 명확히 정리한 문서입니다.

---

## 🔒 역할별 접근 제한 정책

### 기본 원칙
1. **구직자 (Candidate)**: `/user/*` 경로만 접근 가능
2. **구인자 (Employer)**: `/user/*` + `/company/*` 경로 접근 가능
3. **관리자 (Admin)**: `/user/*` + `/admin/*` 경로 접근 가능 (단, `/company/*` 접근 불가)

---

## ❌ 구직자 (Candidate)가 접근 불가능한 기능

### 1. 구인자 전용 페이지 (`/company/*`)
구직자는 다음 모든 구인자 전용 페이지에 접근할 수 없습니다:

#### 1.1 기업 대시보드
- ❌ `/company/dashboard` - 기업 대시보드
- **이유**: 구인자 전용 통계 및 채용 현황

#### 1.2 채용공고 관리
- ❌ `/company/jobs` - 채용공고 작성 및 관리
- **이유**: 구인자만 채용공고를 작성할 수 있음

#### 1.3 지원자 관리
- ❌ `/company/applications` - 지원자 목록 및 관리
- **이유**: 구인자만 지원자를 확인하고 관리할 수 있음

#### 1.4 채용 파이프라인
- ❌ `/company/pipeline` - 채용 파이프라인 관리
- **이유**: 구인자 전용 채용 프로세스 관리

#### 1.5 면접 관리
- ❌ `/company/interviews` - 면접 일정 관리
- **이유**: 구인자만 면접 일정을 관리할 수 있음

#### 1.6 인재 추천
- ❌ `/company/recommendations` - AI 기반 인재 추천
- **이유**: 구인자 전용 인재 발굴 기능

#### 1.7 인재 검색
- ❌ `/company/talents` - 인재 검색 및 프로필 확인
- **이유**: 구인자만 인재를 검색할 수 있음

#### 1.8 구인자 채팅
- ❌ `/company/chat` - 구인자 채팅 인터페이스
- **이유**: 구인자 전용 채팅 관리 페이지
- ⚠️ **참고**: 구직자는 `/user/chat`을 통해 채팅 참여 가능 (구인자가 시작한 채팅만)

#### 1.9 기업 분석
- ❌ `/company/analytics` - 채용 통계 및 분석
- **이유**: 구인자 전용 분석 도구

#### 1.10 직원 관리
- ❌ `/company/employees` - 직원 목록 및 관리
- **이유**: 구인자 전용 직원 관리 기능

#### 1.11 브랜딩
- ❌ `/company/branding` - 회사 브랜딩 관리
- **이유**: 구인자 전용 브랜딩 도구

#### 1.12 회사 프로필 관리
- ❌ `/company/profile` - 회사 프로필 수정
- **이유**: 구인자만 회사 정보를 수정할 수 있음

#### 1.13 회사 정보 관리
- ❌ `/company/info` - 회사 상세 정보 관리
- **이유**: 구인자 전용 회사 정보 관리

#### 1.14 기업 설정
- ❌ `/company/settings` - 기업 계정 설정
- **이유**: 구인자 전용 설정 페이지

### 2. 관리자 전용 페이지 (`/admin/*`)
구직자는 다음 모든 관리자 전용 페이지에 접근할 수 없습니다:

#### 2.1 관리자 대시보드
- ❌ `/admin/dashboard` - 플랫폼 전체 통계
- **이유**: 관리자 전용 대시보드

#### 2.2 사용자 관리
- ❌ `/admin/users` - 전체 사용자 관리
- **이유**: 관리자 전용 사용자 관리 기능

#### 2.3 기업 관리
- ❌ `/admin/companies` - 기업 승인/거절 및 관리
- **이유**: 관리자 전용 기업 관리 기능

#### 2.4 역할 관리
- ❌ `/admin/roles` - 역할 및 권한 관리
- **이유**: 관리자 전용 권한 관리

#### 2.5 시스템 모니터링
- ❌ `/admin/monitoring` - 시스템 성능 모니터링
- **이유**: 관리자 전용 모니터링 도구

#### 2.6 정산 관리
- ❌ `/admin/settlements` - 결제 및 정산 관리
- **이유**: 관리자 전용 정산 기능

#### 2.7 플랫폼 분석
- ❌ `/admin/analytics` - 플랫폼 전체 분석
- **이유**: 관리자 전용 분석 도구

#### 2.8 배너 관리
- ❌ `/admin/banners` - 플랫폼 배너 관리
- **이유**: 관리자 전용 콘텐츠 관리

#### 2.9 시스템 설정
- ❌ `/admin/settings` - 플랫폼 설정 관리
- **이유**: 관리자 전용 시스템 설정

### 3. 구직자 전용 기능 (다른 역할 접근 불가)
구직자만 접근 가능한 기능:

- ✅ `/user/resumes` - 이력서 관리 (구인자, 관리자 접근 불가)

---

## ❌ 구인자 (Employer)가 접근 불가능한 기능

### 1. 구직자 전용 기능
구인자는 다음 구직자 전용 기능에 접근할 수 없습니다:

#### 1.1 이력서 관리
- ❌ `/user/resumes` - 이력서 작성 및 관리
- **이유**: 구직자만 이력서를 작성하고 관리할 수 있음
- **대안**: 구인자는 지원자의 이력서를 지원서를 통해 확인 가능

### 2. 관리자 전용 페이지 (`/admin/*`)
구인자는 다음 모든 관리자 전용 페이지에 접근할 수 없습니다:

#### 2.1 관리자 대시보드
- ❌ `/admin/dashboard` - 플랫폼 전체 통계
- **이유**: 관리자 전용 대시보드

#### 2.2 사용자 관리
- ❌ `/admin/users` - 전체 사용자 관리
- **이유**: 관리자 전용 사용자 관리 기능

#### 2.3 기업 관리
- ❌ `/admin/companies` - 기업 승인/거절 및 관리
- **이유**: 관리자 전용 기업 관리 기능
- ⚠️ **참고**: 구인자는 자신의 회사 정보는 `/company/info`에서 확인 가능

#### 2.4 역할 관리
- ❌ `/admin/roles` - 역할 및 권한 관리
- **이유**: 관리자 전용 권한 관리

#### 2.5 시스템 모니터링
- ❌ `/admin/monitoring` - 시스템 성능 모니터링
- **이유**: 관리자 전용 모니터링 도구

#### 2.6 정산 관리
- ❌ `/admin/settlements` - 결제 및 정산 관리
- **이유**: 관리자 전용 정산 기능

#### 2.7 플랫폼 분석
- ❌ `/admin/analytics` - 플랫폼 전체 분석
- **이유**: 관리자 전용 분석 도구
- ⚠️ **참고**: 구인자는 자신의 채용 통계를 `/company/analytics`에서 확인 가능

#### 2.8 배너 관리
- ❌ `/admin/banners` - 플랫폼 배너 관리
- **이유**: 관리자 전용 콘텐츠 관리

#### 2.9 시스템 설정
- ❌ `/admin/settings` - 플랫폼 설정 관리
- **이유**: 관리자 전용 시스템 설정
- ⚠️ **참고**: 구인자는 자신의 계정 설정을 `/company/settings`에서 관리 가능

### 3. 구인자가 할 수 없는 기능
- ❌ 채용공고에 지원하기
- **이유**: 구인자는 채용공고를 작성하는 역할이지 지원하는 역할이 아님

---

## ❌ 관리자 (Admin)가 접근 불가능한 기능

### 1. 구인자 전용 페이지 (`/company/*`)
관리자는 다음 모든 구인자 전용 페이지에 접근할 수 없습니다:

#### 1.1 기업 대시보드
- ❌ `/company/dashboard` - 기업 대시보드
- **이유**: 관리자는 플랫폼 관리 역할이지 기업 운영 역할이 아님

#### 1.2 채용공고 관리
- ❌ `/company/jobs` - 채용공고 작성 및 관리
- **이유**: 관리자는 채용공고를 작성하지 않음 (기업 승인만 담당)

#### 1.3 지원자 관리
- ❌ `/company/applications` - 지원자 목록 및 관리
- **이유**: 관리자는 개별 기업의 지원자를 관리하지 않음

#### 1.4 채용 파이프라인
- ❌ `/company/pipeline` - 채용 파이프라인 관리
- **이유**: 관리자는 개별 기업의 채용 프로세스를 관리하지 않음

#### 1.5 면접 관리
- ❌ `/company/interviews` - 면접 일정 관리
- **이유**: 관리자는 개별 기업의 면접 일정을 관리하지 않음

#### 1.6 인재 추천
- ❌ `/company/recommendations` - AI 기반 인재 추천
- **이유**: 구인자 전용 인재 발굴 기능

#### 1.7 인재 검색
- ❌ `/company/talents` - 인재 검색 및 프로필 확인
- **이유**: 구인자 전용 인재 검색 기능

#### 1.8 구인자 채팅
- ❌ `/company/chat` - 구인자 채팅 인터페이스
- **이유**: 구인자 전용 채팅 관리 페이지

#### 1.9 기업 분석
- ❌ `/company/analytics` - 채용 통계 및 분석
- **이유**: 구인자 전용 분석 도구
- ⚠️ **참고**: 관리자는 플랫폼 전체 분석을 `/admin/analytics`에서 확인 가능

#### 1.10 직원 관리
- ❌ `/company/employees` - 직원 목록 및 관리
- **이유**: 구인자 전용 직원 관리 기능

#### 1.11 브랜딩
- ❌ `/company/branding` - 회사 브랜딩 관리
- **이유**: 구인자 전용 브랜딩 도구

#### 1.12 회사 프로필 관리
- ❌ `/company/profile` - 회사 프로필 수정
- **이유**: 구인자만 회사 정보를 수정할 수 있음
- ⚠️ **참고**: 관리자는 `/admin/companies`에서 기업 정보를 확인하고 승인/거절 가능

#### 1.13 회사 정보 관리
- ❌ `/company/info` - 회사 상세 정보 관리
- **이유**: 구인자 전용 회사 정보 관리

#### 1.14 기업 설정
- ❌ `/company/settings` - 기업 계정 설정
- **이유**: 구인자 전용 설정 페이지

### 2. 구직자 전용 기능
관리자는 다음 구직자 전용 기능에 접근할 수 없습니다:

#### 2.1 이력서 관리
- ❌ `/user/resumes` - 이력서 작성 및 관리
- **이유**: 구직자만 이력서를 작성하고 관리할 수 있음
- ⚠️ **참고**: 관리자는 사용자 정보를 `/admin/users`에서 확인 가능하지만 이력서는 확인 불가

### 3. 관리자가 할 수 없는 기능
- ❌ 채용공고에 지원하기
- **이유**: 관리자는 채용공고를 작성하거나 지원하지 않음

- ❌ 채용공고 작성하기
- **이유**: 관리자는 플랫폼 관리 역할이지 채용공고 작성 역할이 아님

- ❌ 채팅 시작하기
- **이유**: 관리자는 구직자/구인자 간의 채팅에 개입하지 않음

---

## 📊 역할별 접근 제한 매트릭스

| 페이지/기능 | 구직자 (Candidate) | 구인자 (Employer) | 관리자 (Admin) |
|------------|-------------------|-----------------|---------------|
| **공통 페이지** |
| `/` (홈페이지) | ✅ | ✅ | ✅ |
| `/user/jobs` | ✅ | ✅ | ✅ |
| `/user/companies` | ✅ | ✅ | ✅ |
| `/user/profile` | ✅ | ✅ | ✅ |
| `/user/settings` | ✅ | ✅ | ✅ |
| `/user/chat` | ✅ | ✅ | ✅ |
| **구직자 전용** |
| `/user/resumes` | ✅ | ❌ | ❌ |
| **구인자 전용** |
| `/company/dashboard` | ❌ | ✅ | ❌ |
| `/company/jobs` | ❌ | ✅ | ❌ |
| `/company/applications` | ❌ | ✅ | ❌ |
| `/company/pipeline` | ❌ | ✅ | ❌ |
| `/company/interviews` | ❌ | ✅ | ❌ |
| `/company/recommendations` | ❌ | ✅ | ❌ |
| `/company/talents` | ❌ | ✅ | ❌ |
| `/company/chat` | ❌ | ✅ | ❌ |
| `/company/analytics` | ❌ | ✅ | ❌ |
| `/company/employees` | ❌ | ✅ | ❌ |
| `/company/branding` | ❌ | ✅ | ❌ |
| `/company/profile` | ❌ | ✅ | ❌ |
| `/company/info` | ❌ | ✅ | ❌ |
| `/company/settings` | ❌ | ✅ | ❌ |
| **관리자 전용** |
| `/admin/dashboard` | ❌ | ❌ | ✅ |
| `/admin/users` | ❌ | ❌ | ✅ |
| `/admin/companies` | ❌ | ❌ | ✅ |
| `/admin/roles` | ❌ | ❌ | ✅ |
| `/admin/monitoring` | ❌ | ❌ | ✅ |
| `/admin/settlements` | ❌ | ❌ | ✅ |
| `/admin/analytics` | ❌ | ❌ | ✅ |
| `/admin/banners` | ❌ | ❌ | ✅ |
| `/admin/settings` | ❌ | ❌ | ✅ |

---

## 🔐 접근 제어 메커니즘

### 1. RoleGuard 컴포넌트
- **위치**: `client/src/components/common/RoleGuard.tsx`
- **기능**: 특정 사용자 유형만 접근 가능하도록 제한
- **동작 방식**:
  1. 사용자 인증 상태 확인
  2. 사용자 유형 확인
  3. 허용된 사용자 유형 목록과 비교
  4. 접근 권한이 없으면 홈페이지로 리다이렉트

### 2. ProtectedPage 컴포넌트
- **기능**: 로그인한 사용자만 접근 가능
- **동작 방식**: 비로그인 사용자는 로그인 페이지로 리다이렉트

### 3. 백엔드 권한 검증
- **위치**: `server/auth.ts`
- **기능**: API 엔드포인트 레벨에서 권한 검증
- **동작 방식**: `authorizeRoles` 미들웨어를 통한 역할 기반 접근 제어

---

## ⚠️ 중요한 제한사항

### 1. 채팅 시작 권한
- **구인자만 채팅 시작 가능**
- 구직자는 구인자가 시작한 채팅에만 참여 가능
- 관리자는 채팅에 개입하지 않음

### 2. 채용공고 지원
- **구직자만 채용공고에 지원 가능**
- 구인자는 자신이 작성한 채용공고에 지원할 수 없음
- 관리자는 채용공고를 작성하거나 지원하지 않음

### 3. 이력서 관리
- **구직자만 이력서 작성 및 관리 가능**
- 구인자는 지원자의 이력서를 지원서를 통해만 확인 가능
- 관리자는 사용자 정보는 확인 가능하지만 이력서는 확인 불가

### 4. 기업 관리
- **관리자만 기업 승인/거절 가능**
- 구인자는 자신의 회사 정보만 수정 가능
- 구직자는 기업 정보를 조회만 가능

### 5. 사용자 관리
- **관리자만 전체 사용자 관리 가능**
- 구인자는 자신의 회사 직원만 관리 가능 (`/company/employees`)
- 구직자는 자신의 프로필만 관리 가능

---

## 🔄 역할 간 데이터 접근 제한

### 구직자 → 구인자 데이터
- ✅ 채용공고 조회 가능
- ✅ 기업 정보 조회 가능
- ❌ 지원자 목록 확인 불가
- ❌ 채용 통계 확인 불가
- ❌ 기업 내부 설정 확인 불가

### 구인자 → 구직자 데이터
- ✅ 지원자의 이력서 확인 가능 (지원서를 통해서만)
- ✅ 지원자 프로필 확인 가능 (지원서를 통해서만)
- ❌ 모든 구직자 목록 확인 불가 (인재 검색 기능으로만 제한적 접근)
- ❌ 구직자의 개인 설정 확인 불가

### 관리자 → 구직자/구인자 데이터
- ✅ 모든 사용자 목록 확인 가능 (`/admin/users`)
- ✅ 모든 기업 목록 확인 가능 (`/admin/companies`)
- ❌ 개별 사용자의 이력서 확인 불가
- ❌ 개별 기업의 지원자 목록 확인 불가
- ❌ 개별 기업의 채용 통계 확인 불가

---

## 📝 예외 사항 및 특수 규칙

### 1. 공통 접근 가능한 페이지
다음 페이지는 모든 역할이 접근 가능합니다:
- `/` - 홈페이지
- `/user/jobs` - 채용공고 목록
- `/user/companies` - 기업 목록
- `/user/profile` - 프로필 (자신의 프로필만)
- `/user/settings` - 설정 (자신의 설정만)
- `/user/chat` - 채팅 (참여 중인 채팅방만)

### 2. 관리자의 특수 권한
- 관리자는 모든 사용자와 기업 정보를 확인할 수 있지만, 개별 기능(이력서 작성, 채용공고 작성 등)은 사용할 수 없음
- 관리자는 기업을 승인/거절할 수 있지만, 기업의 채용 프로세스에는 개입하지 않음

### 3. 구인자의 특수 권한
- 구인자는 공통 페이지(`/user/*`)와 구인자 페이지(`/company/*`) 모두 접근 가능
- 구인자는 채용공고를 작성하고 지원자를 관리할 수 있지만, 다른 기업의 정보는 확인할 수 없음

---

## 🛡️ 보안 고려사항

### 1. 프론트엔드 보안
- RoleGuard를 통한 라우트 보호
- 비인가 접근 시 자동 리다이렉트
- 사용자 유형별 메뉴 표시 제한

### 2. 백엔드 보안
- API 엔드포인트 레벨 권한 검증
- 역할 기반 미들웨어
- 데이터 접근 권한 확인

### 3. 데이터 격리
- 각 역할은 자신의 데이터만 접근 가능
- 다른 역할의 데이터는 제한된 방식으로만 접근 가능
- 관리자는 조회만 가능하고 개별 기능은 사용 불가

---

## 📋 요약

### 구직자가 접근 불가능한 것
- ❌ 모든 `/company/*` 페이지 (14개 페이지)
- ❌ 모든 `/admin/*` 페이지 (9개 페이지)
- ❌ 채용공고 작성
- ❌ 지원자 관리
- ❌ 채용 통계 확인

### 구인자가 접근 불가능한 것
- ❌ `/user/resumes` (이력서 관리)
- ❌ 모든 `/admin/*` 페이지 (9개 페이지)
- ❌ 채용공고에 지원
- ❌ 전체 사용자 관리
- ❌ 플랫폼 설정 관리

### 관리자가 접근 불가능한 것
- ❌ 모든 `/company/*` 페이지 (14개 페이지)
- ❌ `/user/resumes` (이력서 관리)
- ❌ 채용공고 작성
- ❌ 채용공고 지원
- ❌ 채팅 시작
- ❌ 개별 기업의 채용 프로세스 관리

---

**마지막 업데이트**: 2025년 1월

